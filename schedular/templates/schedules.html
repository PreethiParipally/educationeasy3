{% extends 'base.html' %}
{% load static %}
{% block title %}Schedules{% endblock %}


{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'courses:course-view' course_id %}">Course</a></li>
            <li class="breadcrumb-item active" aria-current="page">Schedules</li>
    </ol>
  </nav>

<br>
<a class="btn btn-primary" href="{% url 'courses:courses' %}">All Courses</a>   

{% if request.user.is_authenticated %} 
        {% if request.user.is_faculty %}
                <a class="btn btn-primary" href="{% url 'courses:mycreatedcourses' %}">My Courses</a>
        {% else %}
                <a class="btn btn-primary" href="{% url 'courses:my_registered_courses' %}">My Courses</a>
        {% endif %}
{% endif %}
<br><br> 

    <div class="container">
    {% if request.user.is_authenticated and request.user.is_faculty %}
        {% if count %}
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h6 class="panel-title">Schedule</h6>
                </div>
                <table class="table table-hover table-bordered" style="text-align: center;" id="dev-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Start Time</th>
                        <th>End Time</th>
                        <th>Total Number of Seats</th>
                        <th>Booked Seats</th>
                        <th>Required Vaccination Level</th>
                        <th>Action</th>
                    </tr>
                </thead>
                {% for schedule in schedules %}
                    <tr>
                        <td>{{ schedule.date }}</td>
                        <td>{{ schedule.start_time }}</td>
                        <td>{{ schedule.end_time }}</td>
                        <td>{{ schedule.seats }}</td>
                        <td>{{ schedule.bookings.count }}</td>
                        <td>{{ schedule.vaccine_dose }}</td>
                        <td><a class="btn btn-info" href="{% url 'schedular:bookings' id1=schedule.course_id id2=schedule.id %}"><span class="glyphicon glyphicon-eye-open"></span>  Bookings</a>
                            <a class="btn btn-warning" href="{% url 'schedular:update_schedule' id=schedule.course_id pk=schedule.pk %}"><span class="glyphicon glyphicon-edit"></span></a>
                            <a class="btn btn-warning" href="{% url 'schedular:delete_schedule' id=schedule.course_id pk=schedule.pk %}"><span class="glyphicon glyphicon-trash"></span></a>
                            <br>
                        </td>
                    </tr>

                {% empty %}
                    <h4 style="color: red;">No Schedules!!</h4>
                {% endfor %}
            </table>
            </div>
        {% else %}                
            <h4 style="color: red;">No Schedules!!</h4>
        {% endif %}
        <a class="btn btn-primary" href="{% url 'schedular:add_schedule' course_id %}"><span class="glyphicon glyphicon-plus"></span>  Add Schedule</a>
            
    {% elif request.user.is_authenticated and request.user.is_student %}
        {% if count %}
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h6 class="panel-title">Schedule</h6>
                </div>
                <table class="table table-hover table-bordered" id="dev-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Start Time</th>
                        <th>End Time</th>
                        <th>Action</th>
                    </tr>
                </thead>
                {% for schedule in schedules %}
                    <tr>
                        <td>{{ schedule.date }}</td>
                        <td>{{ schedule.start_time }}</td>
                        <td>{{ schedule.end_time }}</td>
                        <td>
                            <a class="btn btn-primary" href="{% url 'schedular:view_schedule' id=schedule.course_id pk=schedule.pk %}">View_Schedule</a>
                        </td>
                    </tr>

                {% empty %}
                    <h4 style="color: red;">No Schedule!!</h4>
                {% endfor %}
            </table>
            </div>   
        {% else %}
            <h4 style="color: red;">No Schedule!!</h4>
        {% endif %}     
    {% else %}
        <h4 style="color:#4682B4">Please Login to Education Easy </h4>
        <a href="{% url 'accounts:login' %}" class="btn btn-primary"><i class="glyphicon glyphicon-user" style="font-weight:bold"></i> Login </a>    

    {% endif %}
            <br/>
        </div>

    </div>

{% endblock %}

