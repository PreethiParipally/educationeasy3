{% extends 'base.html' %}

{% load bootstrap %}

{% load static %}

{% block title %}  Slot Details. {% endblock %}

{% block content %}
<style>
  *{
      margin: 0px;
      padding: 0px;
  }
  .card{
      width: 70%;
      /* display: inline-block; */
      box-shadow: 2px 2px 20px black;
      border-radius: 5px; 
      margin: 2%;
      background-color: gainsboro;
      /* border-right: 3px dotted;
      margin-right: 50px; */
  }

  .image
  {
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
      width: 100%;
  }
</style>
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item active" aria-current="page">Ticket</li>
    </ol>
  </nav>

<br>
<a class="btn btn-primary" href="{% url 'courses:courses' %}">All Courses</a>   

{% if request.user.is_authenticated %} 
        {% if request.user.is_faculty %}
                <a class="btn btn-primary" href="{% url 'courses:mycreatedcourses' %}">My Courses</a>
        {% else %}
                <a class="btn btn-primary" href="{% url 'courses:my_registered_courses' %}">My Courses</a>
        {% endif %}
{% endif %}
<br><br> 

<div class="card" id="content">
     
    <div class="image" style="background-color: red;">
        <h2 style="padding: 10px; color: white; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Person: {{row.user.username}}</h2>
    </div>

    <div class="des">
        <img src="{% static 'ticket.png' %}" style="width: 30%; height: auto; padding-left: 9px; padding-bottom: 9px; " alt="">
        <div style="float: right; margin-right: 45%;">
            <h2 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">{{row.course.course_name}}</h2>
            <h3 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">{{row.course.user}}</h3>
            <h3 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">{{row.schedule.date}}</h3>
            <h3 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">{{row.schedule.start_time}} - {{row.schedule.end_time}}</h3>
            <h4 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Seat : {{row.seat}}</h4>
        </div>


        
    </div>

</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class="btn btn-success" id="download">Downlaod</button>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
<script>
window.onload = function () {
    document.getElementById("download")
        .addEventListener("click", () => {
            const invoice = this.document.getElementById("content");
            console.log(invoice);
            console.log(window);
            var opt = {
                margin: 1,
                filename: 'myfile.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            html2pdf().from(invoice).set(opt).save();
        })
}
</script>

{% endblock %}