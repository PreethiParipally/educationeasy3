{% extends 'base.html' %}
{% block content %}
<br>
        <a class="btn btn-primary" href="{% url 'courses:courses' %}">All Courses</a>   
        
        {% if request.user.is_authenticated %} 
                {% if request.user.is_faculty %}
                        <a class="btn btn-primary" href="{% url 'courses:mycreatedcourses' %}">My Courses</a>
                {% else %}
                        <a class="btn btn-primary" href="{% url 'courses:my_registered_courses' %}">My Courses</a>
                {% endif %}
        {% endif %}
        <br><br> 
<div class="card">
  <div class="card-header">
    {% if searched %}
		  You Searched For {{ searched }}
	  {% else %}
		  Search Courses...
	  {% endif %}
  </div>
  <div class="card-body">
    <form method=POST action="{% url 'courses:search_courses' %}">
      {% csrf_token %}
      <input class="form-control me-2" type="search" placeholder="Search Courses" aria-label="Search" name="searched">
      <br/>
      <button class="btn btn-outline-secondary" type="submit">Search</button>
    </form>
  </div>
</div>
<br/>
</div>
{% if searched %}
  <div class="row">
    <div class="col-12">
      <div class="section-heading text-center">
          </br>
          <h3 class="lead">Available Courses </h3>
          <div class="line"></div>
      </div>
    </div>
  </div>
{% endif %}
<div class="container" >
  <div class="row">
    {% for course in courses %}
      <div class="col-12 col-sm-6 col-md-4">

        <div class="single-dentist-area mb-100">
          <img  style="height: 300px; width: 500px " src="{{ course.course_image.url }}" alt="">
          <div class="dentist-content">
            <div class="dentist-info bg-gradient-overlay">
              <h5>{{ course.course_name }} |  <a href="{% url 'courses:course-view' course.pk %}"> <small>VIEW COURSE</small></a> </h5>
              <p>{{ course.user }} </p>
            </div>
          </div>
        </div>
      </div>
 {% empty %}
      {% if searched %}
          <h4 class="bg-light text-center font-italic" style="color: red;" colspan="5">No Match Found!!</h4>
      {% endif %}
{% endfor %}
</div></div>
<div class="pagination" style="display: block;">
  <span class="step-links">
      {% if page_obj.has_previous %}
      <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
      <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>
      {% endif %}

      {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
          <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
        {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
      <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
      <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
      {% endif %}
  </span>
</div>	
{% endblock %}